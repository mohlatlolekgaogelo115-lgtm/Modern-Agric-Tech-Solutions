<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TerraSoil Community ‚Ä¢ Africa-First Network</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&amp;family=Space+Grotesk:wght@500;600&amp;display=swap" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&amp;family=Space+Grotesk:wght@500;600&amp;display=swap');
        :root {
            --emerald: 16 185 129;
        }
        .tail-container {
            font-family: 'Inter', system_ui, sans-serif;
        }
        .logo-font {
            font-family: 'Space Grotesk', sans-serif;
        }
        .hero-bg {
            background: linear-gradient(135deg, #166534 0%, #052e16 100%);
        }
        .group-card {
            transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
        }
        .group-card:hover {
            transform: scale(1.04) translateY(-6px);
        }
        .insight-card {
            transition: all 0.3s ease;
        }
        .scientist-card {
            transition: all 0.3s ease;
        }
        .scientist-card:hover {
            box-shadow: 0 25px 50px -12px rgb(16 185 129 / 0.25);
        }
        .live-dot {
            animation: pulse 2s infinite;
        }
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.4; }
        }
        .map-pin {
            animation: ping 2s cubic-bezier(0, 0, 0.2, 1) infinite;
        }
    </style>
</head>
<body class="tail-container bg-emerald-50 text-slate-900">

    <!-- NAVBAR -->
    <nav class="bg-white border-b border-emerald-100 sticky top-0 z-50">
        <div class="max-w-screen-2xl mx-auto px-8 py-5 flex items-center justify-between">
            <div class="flex items-center gap-x-3">
                <div class="w-9 h-9 bg-emerald-600 rounded-2xl flex items-center justify-center text-white text-2xl shadow-inner">üå±</div>
                <div>
                    <span class="logo-font text-3xl font-semibold tracking-tighter text-emerald-700">TerraSoil</span>
                    <span class="text-emerald-500 text-sm font-medium ml-1">AI</span>
                </div>
            </div>

            <div class="flex items-center gap-x-9 text-sm font-medium">
                <a href="#" onclick="window.location.href='index.html'" class="flex items-center gap-x-2 text-slate-500 hover:text-emerald-700">
                    <i class="fa-solid fa-gauge-high"></i> Dashboard
                </a>
                <a href="#" onclick="window.location.href='analyze.html'" class="flex items-center gap-x-2 text-slate-500 hover:text-emerald-700">
                    <i class="fa-solid fa-upload"></i> Analyze
                </a>
                <a href="#" class="text-emerald-700 font-semibold flex items-center gap-x-2 border-b-2 border-emerald-600 pb-1">
                    <i class="fa-solid fa-users"></i> Community
                </a>
                <a href="#" class="flex items-center gap-x-2 text-slate-500 hover:text-emerald-700">
                    <i class="fa-solid fa-chart-line"></i> Insights Map
                </a>
            </div>

            <div class="flex items-center gap-x-6">
                <button onclick="showShareModal()" 
                        class="bg-emerald-600 hover:bg-emerald-700 text-white px-6 py-3 rounded-3xl text-sm font-semibold flex items-center gap-x-2 transition-all">
                    <i class="fa-solid fa-share-nodes"></i>
                    <span>Share Anonymised Data</span>
                </button>
                
                <div class="flex items-center gap-x-3">
                    <div class="text-right">
                        <div class="font-semibold text-sm">Kgaogelo</div>
                        <div class="text-emerald-600 text-xs">Johannesburg ‚Ä¢ Gauteng</div>
                    </div>
                    <div class="w-9 h-9 bg-emerald-100 rounded-2xl overflow-hidden border-2 border-emerald-300">
                        <img src="https://picsum.photos/id/64/128/128" alt="Profile" class="w-full h-full object-cover">
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <div class="max-w-screen-2xl mx-auto flex">
        <!-- SIDEBAR -->
        <div class="w-80 bg-white border-r border-emerald-100 min-h-screen p-6 flex flex-col">
            <div class="mb-10">
                <div class="uppercase text-xs font-semibold tracking-widest text-emerald-700 mb-4 flex items-center gap-x-2">
                    <span class="w-2 h-2 bg-emerald-500 rounded-full live-dot"></span>
                    AFRICA-FIRST NETWORK
                </div>
                <div class="text-2xl font-semibold leading-none">12,847<br><span class="text-emerald-600 text-xl">farmers connected</span></div>
                <div class="text-xs text-slate-400 mt-1">Across 9 provinces ‚Ä¢ 4 countries</div>
            </div>

            <!-- My Groups -->
            <div class="mb-8">
                <div class="flex justify-between items-center mb-4 px-1">
                    <span class="text-sm font-semibold text-slate-500">My Regional Groups</span>
                    <button onclick="showAllGroups()" class="text-emerald-600 text-xs font-medium">All ‚Üí</button>
                </div>
                <div id="my-groups" class="space-y-3"></div>
            </div>

            <!-- Quick Stats -->
            <div class="bg-emerald-50 rounded-3xl p-6 mt-auto">
                <div class="text-xs uppercase tracking-widest text-slate-400 mb-3">This month‚Äôs collective impact</div>
                <div class="grid grid-cols-2 gap-6 text-center">
                    <div>
                        <div class="text-4xl font-semibold text-emerald-700">214 t</div>
                        <div class="text-xs text-slate-500">Lime recommended</div>
                    </div>
                    <div>
                        <div class="text-4xl font-semibold text-emerald-700">+9.4%</div>
                        <div class="text-xs text-slate-500">Avg yield gain</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- MAIN CONTENT -->
        <div class="flex-1 p-10">
            <!-- HERO -->
            <div class="hero-bg text-white rounded-3xl px-12 py-16 mb-12 relative overflow-hidden">
                <div class="max-w-xl">
                    <div class="inline-flex items-center gap-x-2 bg-white/20 backdrop-blur-md px-5 py-2 rounded-3xl text-sm mb-6">
                        <span class="text-amber-300">üåç</span>
                        <span class="font-medium">Africa-First ‚Ä¢ Farmer-Led</span>
                    </div>
                    <h1 class="text-6xl leading-none font-semibold tracking-tighter logo-font mb-4">
                        Together we heal<br>our soils
                    </h1>
                    <p class="text-emerald-100 text-xl">Share anonymised data. Get local advice. Build resilient African agriculture.</p>
                    
                    <div class="mt-10 flex gap-x-4">
                        <button onclick="joinFeaturedGroup()" 
                                class="bg-white text-emerald-800 font-semibold px-10 py-4 rounded-3xl flex items-center gap-x-3 hover:shadow-xl transition-all">
                            <i class="fa-solid fa-handshake"></i>
                            Join Gauteng Farmers
                        </button>
                        <button onclick="showShareModal()" 
                                class="border border-white/70 hover:bg-white/10 font-medium px-8 py-4 rounded-3xl transition-all">
                            Share my data anonymously
                        </button>
                    </div>
                </div>
                
                <!-- Decorative map pins -->
                <div class="absolute bottom-8 right-12 text-6xl opacity-30">üáøüá¶</div>
                <div class="absolute top-12 right-32 w-5 h-5 bg-white rounded-full flex items-center justify-center map-pin">
                    <div class="w-2 h-2 bg-emerald-400 rounded-full"></div>
                </div>
            </div>

            <div class="grid grid-cols-12 gap-8">
                <!-- REGIONAL GROUPS -->
                <div class="col-span-12 lg:col-span-5">
                    <div class="flex items-center justify-between mb-6">
                        <span class="text-xl font-semibold">Regional Groups</span>
                        <span onclick="showAllGroups()" class="text-emerald-600 text-sm cursor-pointer flex items-center gap-x-1">
                            Explore all <i class="fa-solid fa-arrow-right"></i>
                        </span>
                    </div>
                    
                    <div class="grid grid-cols-2 gap-6" id="regional-groups"></div>
                </div>

                <!-- COLLECTIVE INSIGHTS -->
                <div class="col-span-12 lg:col-span-7">
                    <div class="flex justify-between items-end mb-6">
                        <div>
                            <span class="text-xl font-semibold">Collective Insights</span>
                            <span class="ml-3 text-xs bg-emerald-100 text-emerald-700 px-4 py-1 rounded-3xl">Live ‚Ä¢ Anonymised</span>
                        </div>
                        <button onclick="refreshInsights()" 
                                class="text-slate-400 hover:text-emerald-600 text-sm flex items-center gap-x-2">
                            <i class="fa-solid fa-rotate"></i> Refresh
                        </button>
                    </div>
                    
                    <div id="insights-feed" class="space-y-5 max-h-[620px] overflow-y-auto pr-4 custom-scroll"></div>
                </div>

                <!-- SCIENTIST DIRECTORY -->
                <div class="col-span-12 bg-white rounded-3xl shadow-sm p-8">
                    <div class="flex items-center justify-between mb-8">
                        <div class="font-semibold text-2xl">Verified Soil Scientists</div>
                        <div class="relative w-72">
                            <input id="scientist-search" 
                                   onkeyup="filterScientists()"
                                   type="text" 
                                   placeholder="Search by name or province..." 
                                   class="w-full bg-slate-100 border border-transparent focus:border-emerald-300 rounded-3xl py-4 pl-14 text-sm">
                            <i class="fa-solid fa-magnifying-glass absolute left-6 top-4 text-slate-400"></i>
                        </div>
                    </div>
                    
                    <div id="scientists-grid" class="grid grid-cols-2 lg:grid-cols-4 gap-6"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- SHARE DATA MODAL -->
    <div id="share-modal" class="hidden fixed inset-0 bg-black/70 flex items-center justify-center z-[999]">
        <div class="bg-white rounded-3xl max-w-xl w-full mx-4 overflow-hidden">
            <div class="px-8 py-6 border-b flex items-center justify-between">
                <span class="font-semibold text-2xl">Share Anonymised Data</span>
                <button onclick="closeShareModal()" class="text-4xl leading-none text-slate-300 hover:text-slate-400">√ó</button>
            </div>
            
            <div class="p-8">
                <textarea id="share-text" rows="4" 
                          class="w-full border border-slate-200 rounded-3xl p-6 text-sm focus:outline-none focus:border-emerald-300"
                          placeholder="Example: My Johannesburg ward soil lost 12% organic matter since 2020..."></textarea>
                
                <div class="mt-6 grid grid-cols-2 gap-6">
                    <div>
                        <label class="block text-xs font-medium text-slate-500 mb-2">Province</label>
                        <select id="share-province" class="w-full border border-slate-200 rounded-3xl py-4 px-6 text-sm">
                            <option>Gauteng</option>
                            <option>Limpopo</option>
                            <option>KwaZulu-Natal</option>
                            <option>Western Cape</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-xs font-medium text-slate-500 mb-2">Data Type</label>
                        <select id="share-type" class="w-full border border-slate-200 rounded-3xl py-4 px-6 text-sm">
                            <option>Organic Matter</option>
                            <option>pH Trend</option>
                            <option>NPK Levels</option>
                            <option>Water Retention</option>
                        </select>
                    </div>
                </div>
            </div>
            
            <div class="p-8 border-t flex justify-between items-center bg-slate-50">
                <div class="text-xs text-slate-400 flex items-center gap-x-2">
                    <i class="fa-solid fa-shield-halved"></i>
                    100% anonymised &amp; verified
                </div>
                <button onclick="submitAnonymisedData()" 
                        class="bg-emerald-600 hover:bg-emerald-700 text-white px-10 py-4 rounded-3xl font-semibold flex items-center gap-x-3">
                    Publish to Network
                    <i class="fa-solid fa-paper-plane"></i>
                </button>
            </div>
        </div>
    </div>

    <!-- SCIENTIST PROFILE MODAL -->
    <div id="scientist-modal" class="hidden fixed inset-0 bg-black/70 flex items-center justify-center z-[999]">
        <div class="bg-white rounded-3xl max-w-md w-full mx-4">
            <div class="p-8">
                <div class="flex justify-end">
                    <button onclick="closeScientistModal()" class="text-3xl text-slate-300">√ó</button>
                </div>
                <div id="modal-scientist-content" class="text-center"></div>
            </div>
        </div>
    </div>

    <!-- TOAST -->
    <div id="toast" class="hidden fixed bottom-8 right-8 bg-emerald-800 text-white rounded-3xl px-7 py-4 flex items-center gap-x-3 shadow-2xl">
        <i class="fa-solid fa-check-circle text-2xl"></i>
        <span id="toast-text" class="font-medium pr-6"></span>
    </div>

    <script>
        // Sample data
        const regionalGroups = [
            { id: 1, name: "Gauteng Farmers", location: "Johannesburg & surrounds", members: 2840, activity: "3 new insights today", emoji: "üåæ", joined: true },
            { id: 2, name: "Limpopo Smallholders", location: "Polokwane ‚Ä¢ Vhembe", members: 1650, activity: "Organic matter map updated", emoji: "ü•ú", joined: false },
            { id: 3, name: "KZN Maize Growers", location: "Pietermaritzburg", members: 920, activity: "Lime trial results", emoji: "üåΩ", joined: false },
            { id: 4, name: "Western Cape Vineyards", location: "Stellenbosch", members: 470, activity: "pH trends shared", emoji: "üçá", joined: false }
        ];

        const insightsData = [
            {
                id: 1,
                title: "Johannesburg Ward 112",
                text: "Soils lost 15% organic matter since 2015. Average now 1.8%.",
                province: "Gauteng",
                time: "11m ago",
                trend: "-15%",
                emoji: "üìâ"
            },
            {
                id: 2,
                title: "Limpopo ‚Ä¢ Mopani District",
                text: "Collective data shows 28% of smallholder fields now below 5.8 pH.",
                province: "Limpopo",
                time: "47m ago",
                trend: "pH alert",
                emoji: "‚ö†Ô∏è"
            },
            {
                id: 3,
                title: "Free State ‚Ä¢ Bloemfontein",
                text: "Nitrogen use efficiency improved 19% after QUEFTS-guided applications.",
                province: "Free State",
                time: "2h ago",
                trend: "+19%",
                emoji: "üìà"
            }
        ];

        const scientists = [
            {
                id: 1,
                name: "Dr. Thabo Mokoena",
                title: "Soil Fertility Specialist",
                location: "Pretoria, Gauteng",
                expertise: "NPK ‚Ä¢ Lime ‚Ä¢ Conservation",
                verified: true,
                avatar: "https://picsum.photos/id/64/300/300",
                bio: "15 years working with Gauteng duplex soils. Helped 400+ farms."
            },
            {
                id: 2,
                name: "Prof. Naledi Khumalo",
                title: "Pedology & Water Retention",
                location: "Polokwane, Limpopo",
                expertise: "Smallholder systems ‚Ä¢ Clay soils",
                verified: true,
                avatar: "https://picsum.photos/id/201/300/300",
                bio: "Author of Limpopo Soil Health Guide 2024"
            },
            {
                id: 3,
                name: "Dr. Sipho Ndlovu",
                title: "Soil Microbiologist",
                location: "Durban, KZN",
                expertise: "Organic matter ‚Ä¢ Cover crops",
                verified: true,
                avatar: "https://picsum.photos/id/1005/300/300",
                bio: "Runs mobile soil labs for rural cooperatives"
            },
            {
                id: 4,
                name: "Dr. Aisha Patel",
                title: "Precision Agriculture",
                location: "Cape Town",
                expertise: "IoT sensors ‚Ä¢ QUEFTS modelling",
                verified: true,
                avatar: "https://picsum.photos/id/1011/300/300",
                bio: "Western Cape representative ‚Äì Soil Science Society of SA"
            }
        ];

        function renderMyGroups() {
            const container = document.getElementById("my-groups");
            container.innerHTML = "";
            regionalGroups.filter(g => g.joined).forEach(group => {
                const div = document.createElement("div");
                div.className = "flex items-center gap-x-4 bg-emerald-50 rounded-3xl p-4 cursor-pointer";
                div.innerHTML = `
                    <div class="text-4xl">${group.emoji}</div>
                    <div class="flex-1">
                        <div class="font-semibold text-sm">${group.name}</div>
                        <div class="text-xs text-emerald-600">${group.members} members</div>
                    </div>
                `;
                div.onclick = () => showToast(`Opened ${group.name} chat`);
                container.appendChild(div);
            });
        }

        function renderRegionalGroups() {
            const container = document.getElementById("regional-groups");
            container.innerHTML = "";
            regionalGroups.forEach(group => {
                const div = document.createElement("div");
                div.className = `group-card bg-white border border-emerald-100 rounded-3xl p-6 cursor-pointer ${group.joined ? 'ring-2 ring-emerald-600' : ''}`;
                div.innerHTML = `
                    <div class="flex justify-between">
                        <div class="text-5xl">${group.emoji}</div>
                        ${group.joined ? `<span class="text-xs bg-emerald-100 text-emerald-700 px-3 h-6 rounded-2xl flex items-center">MEMBER</span>` : ''}
                    </div>
                    <div class="mt-6 font-semibold text-lg leading-tight">${group.name}</div>
                    <div class="text-xs text-slate-400 mt-1">${group.location}</div>
                    
                    <div class="mt-8 flex items-center justify-between text-xs">
                        <div class="flex items-center gap-x-1">
                            <i class="fa-solid fa-users text-emerald-500"></i>
                            <span class="font-medium">${group.members}</span>
                        </div>
                        <div onclick="toggleJoin(${group.id}); event.stopImmediatePropagation();" 
                             class="px-6 py-2 rounded-3xl font-medium text-xs transition-all ${group.joined ? 'bg-emerald-100 text-emerald-700' : 'bg-slate-100 hover:bg-emerald-600 hover:text-white'}">
                            ${group.joined ? 'Leave' : 'Join'}
                        </div>
                    </div>
                `;
                div.onclick = () => showToast(`Welcome to ${group.name}`);
                container.appendChild(div);
            });
        }

        function toggleJoin(id) {
            const group = regionalGroups.find(g => g.id === id);
            if (group) {
                group.joined = !group.joined;
                renderRegionalGroups();
                renderMyGroups();
                showToast(group.joined ? `Welcome to ${group.name}!` : `Left ${group.name}`);
            }
        }

        function renderInsights() {
            const container = document.getElementById("insights-feed");
            container.innerHTML = "";
            insightsData.forEach(insight => {
                const div = document.createElement("div");
                div.className = "insight-card bg-white border border-emerald-100 rounded-3xl p-6 flex gap-x-6";
                div.innerHTML = `
                    <div class="text-4xl w-12">${insight.emoji}</div>
                    <div class="flex-1">
                        <div class="flex items-center justify-between">
                            <div class="font-semibold">${insight.title}</div>
                            <div class="text-xs text-slate-400">${insight.time}</div>
                        </div>
                        <div class="mt-3 text-slate-600 leading-snug">${insight.text}</div>
                        <div class="mt-4 flex items-center gap-x-2">
                            <span class="px-4 py-1 bg-emerald-50 text-emerald-700 text-xs rounded-3xl">${insight.province}</span>
                            <span class="text-emerald-600 text-sm font-medium">${insight.trend}</span>
                        </div>
                    </div>
                `;
                container.appendChild(div);
            });
        }

        function renderScientists(filtered = scientists) {
            const container = document.getElementById("scientists-grid");
            container.innerHTML = "";
            filtered.forEach(scientist => {
                const div = document.createElement("div");
                div.className = "scientist-card bg-white border border-slate-100 rounded-3xl overflow-hidden cursor-pointer";
                div.innerHTML = `
                    <img src="${scientist.avatar}" class="w-full h-44 object-cover">
                    <div class="p-5">
                        <div class="flex items-center gap-x-2">
                            <span class="font-semibold">${scientist.name}</span>
                            ${scientist.verified ? `<i class="fa-solid fa-circle-check text-emerald-500"></i>` : ''}
                        </div>
                        <div class="text-xs text-slate-500">${scientist.title}</div>
                        <div class="text-xs text-emerald-600 mt-4">${scientist.location}</div>
                        <div class="text-[10px] text-slate-400 mt-1">${scientist.expertise}</div>
                    </div>
                `;
                div.onclick = () => showScientistModal(scientist);
                container.appendChild(div);
            });
        }

        function filterScientists() {
            const term = document.getElementById("scientist-search").value.toLowerCase();
            const filtered = scientists.filter(s => 
                s.name.toLowerCase().includes(term) || 
                s.location.toLowerCase().includes(term)
            );
            renderScientists(filtered);
        }

        function showScientistModal(scientist) {
            const modal = document.getElementById("scientist-modal");
            const content = document.getElementById("modal-scientist-content");
            
            content.innerHTML = `
                <img src="${scientist.avatar}" class="w-28 h-28 mx-auto rounded-3xl object-cover ring-4 ring-emerald-100">
                <div class="mt-6 font-semibold text-2xl">${scientist.name}</div>
                <div class="text-emerald-600">${scientist.title}</div>
                <div class="text-xs mt-1 text-slate-400">${scientist.location}</div>
                
                <div class="my-8 bg-emerald-50 rounded-3xl p-6 text-left text-sm">
                    ${scientist.bio}
                </div>
                
                <button onclick="contactScientist()" 
                        class="w-full py-4 bg-emerald-700 hover:bg-emerald-800 text-white font-semibold rounded-3xl">
                    Message on WhatsApp
                </button>
            `;
            modal.classList.remove("hidden");
            modal.classList.add("flex");
        }

        function closeScientistModal() {
            const modal = document.getElementById("scientist-modal");
            modal.classList.add("hidden");
            modal.classList.remove("flex");
        }

        function contactScientist() {
            closeScientistModal();
            showToast("WhatsApp link opened (demo)");
        }

        function showShareModal() {
            document.getElementById("share-modal").classList.remove("hidden");
            document.getElementById("share-modal").classList.add("flex");
        }

        function closeShareModal() {
            document.getElementById("share-modal").classList.add("hidden");
            document.getElementById("share-modal").classList.remove("flex");
        }

        function submitAnonymisedData() {
            closeShareModal();
            const newInsight = {
                id: Date.now(),
                title: "New collective contribution",
                text: document.getElementById("share-text").value || "Anonymous farmer shared valuable soil trend data.",
                province: document.getElementById("share-province").value,
                time: "just now",
                trend: "üìä",
                emoji: "üåç"
            };
            insightsData.unshift(newInsight);
            renderInsights();
            showToast("Thank you! Your anonymised data is now live in the network");
        }

        function refreshInsights() {
            showToast("Feed refreshed ‚Ä¢ 1 new insight from Limpopo");
            // Simulate new insight
            insightsData.unshift({
                id: Date.now(),
                title: "Limpopo ‚Ä¢ Sekhukhune",
                text: "Smallholders report +11% moisture retention after mulching trials",
                province: "Limpopo",
                time: "just now",
                trend: "+11%",
                emoji: "üíß"
            });
            renderInsights();
        }

        function showAllGroups() {
            showToast("Full group directory coming soon");
        }

        function joinFeaturedGroup() {
            const gauteng = regionalGroups[0];
            gauteng.joined = true;
            renderRegionalGroups();
            renderMyGroups();
            showToast("Welcome to Gauteng Farmers Network! üéâ");
        }

        function showToast(message) {
            const toast = document.getElementById("toast");
            document.getElementById("toast-text").innerHTML = message;
            toast.classList.remove("hidden");
            setTimeout(() => {
                toast.classList.add("translate-y-12", "opacity-0");
                setTimeout(() => {
                    toast.classList.add("hidden");
                    toast.classList.remove("translate-y-12", "opacity-0");
                }, 400);
            }, 3000);
        }

        // Initialize
        window.onload = function() {
            renderMyGroups();
            renderRegionalGroups();
            renderInsights();
            renderScientists();
            
            // Welcome toast
            setTimeout(() => {
                showToast("Welcome back to the Africa-First Network, Kgaogelo üåç");
            }, 1400);
            
            console.log("%cTerraSoil Community ready ‚Ä¢ Built for African farmers", "color:#10b981; font-family:monospace");
        };
    </script>
</body>
</html>
